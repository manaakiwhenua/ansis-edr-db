[//]: # "Autogenerated from EDR database view sys.doc_schema_markdown"

# EDR reg Schema Documentation

## Overview
The `reg` schema holds tables, views and functions for the registry used to organise, publish and govern concepts, concept schemes and collections, class models, entities and their datasets.

> __Figure__ `reg` schema tables.

![schema - reg](../figs/schema%20-%20reg.png)

## Tables and views

### reg.register \[table\]

Registers of resources (e.g. concept schemes, concept and attribute collections, entity datasets, or entities). Registers document the governance of, and manage access to, resources.

| Column | Data type | Key | FK References | Null | Default | Definition |
| ------ | --------- | --- | ------------- | ---- | ------- | ---------- |
| id | uuid | PK |  | NO | `gen_random_uuid()` | Register UUID. |
| default_label | text |  |  | YES |  | The default label for a register when displayed. Derived by concatenating one or more attribute values in `reg.register__attribute` and populated by a trigger function on that table. |
| register_id | uuid |  |  | YES |  | Parent register UUID. Organisation of registers into hierarchies should be discouraged in favour of organisation into registers (`reg.register`). |

| Index | Type | Columns |
| ----- | ---- | ------- |
| fx_register__register | btree | `register_id` |
| ix_register__default_label | gin | `default_label gin_trgm_ops` |
| pk_register | unique; btree | `id` |

### reg.register__attribute \[table\]

Register properties stored as key (`attribute_id`) value pairs.

| Column | Data type | Key | FK References | Null | Default | Definition |
| ------ | --------- | --- | ------------- | ---- | ------- | ---------- |
| id | uuid | PK |  | NO | `gen_random_uuid()` | Register attribute UUID |
| register_id | uuid |  |  | NO |  | Register UUID |
| attribute_id | text |  |  | NO |  | The attribute type - the key in a key-value-pair - from `cm.attribute`. |
| value | jsonb |  |  | YES |  | A JSON object holding the value of attribute. The data type for a given `register__attribute.attribute_id` is defined in `cm.system__type__data_type.schema_json`. |

| Index | Type | Columns |
| ----- | ---- | ------- |
| fx_register__attribute__attribute | btree | `attribute_id` |
| fx_register__attribute__register | btree | `register_id` |
| ix_register__attribute__value | gin | `value` |
| pk_register__attribute | unique; btree | `id` |
